function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _createSuper(r){var s=_isNativeReflectConstruct();return function _createSuperInternal(){var e,t=_getPrototypeOf(r);if(s){var i=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _get(e,t,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,i){var r=_superPropBase(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(i):s.value}})(e,t,i||e)}var Slider=function(){function Slider(){_classCallCheck(this,Slider)}return _createClass(Slider,[{key:"getEvent",value:function getEvent(){return-1!=event.type.search("touch")?event.touches[0]:event}},{key:"measuresMaximumSwipeOfSlider",value:function measuresMaximumSwipeOfSlider(){var t=this;this.sliderTrack.querySelectorAll(".slide").forEach(function(e){t.maximumSwipingAtSlider+=e.offsetWidth}),this.maximumSwipingAtSlider-=this.sliderWidth}},{key:"checkSliderCanBeMoved",value:function checkSliderCanBeMoved(e){if(5<=Math.abs(e.clientY-this.positionPressedY)&&"touchmove"===event.type){this.isScrollingSlider?this.isScrollingSlider&&(this.allowSwipe=!0):(this.allowSwipe=!1,this.removeEventsSliderTrack())}}},{key:"checksOutOfBounds",value:function checksOutOfBounds(){(this.positionX_FingetCurrentMoment_OnSlider>=this.positionFingerPressSliderX&&0<this.positionSliderTrack-this.positionFinal||this.positionX_FingetCurrentMoment_OnSlider>=this.sliderWidth-this.positionFingerPressSliderX&&this.positionSliderTrack-this.positionFinal<0)&&this.swipeEnd()}},{key:"calculatesTouchCoordinates_SwipeStart",value:function calculatesTouchCoordinates_SwipeStart(e){this.positionPressedX=e.clientX,this.positionPressedY=e.clientY,this.positionFingerPressSliderX=this.positionPressedX-this.slider.getBoundingClientRect().x,this.positionFingerPressSliderY=this.positionPressedY-this.slider.getBoundingClientRect().y}}]),Slider}(),SliderWithFight=function(e){_inherits(SliderWithFight,Slider);var r=_createSuper(SliderWithFight);function SliderWithFight(e,t){var i;return _classCallCheck(this,SliderWithFight),(i=r.call(this)).slider=e,i.options=t,i.sliderWidth=Math.round(i.slider.getBoundingClientRect().width),i.sliderTrack=i.slider.querySelector(".slider-track"),i.currentSlide=0,i.numberSlides=i.sliderTrack.querySelectorAll(".slide"),i.positionSlider=0,i.positionFinal=0,i.positionPressedX,i.positionPressedY,i.positionFingerPressSliderX,i.positionFingerPressSliderY,i.positionX_FingetCurrentMoment_OnSlider,i.positionY_FingetCurrentMoment_OnSlider,i.allowSwipe=!0,i.isScrollingSlider=!1,i.addOptions(),i._swipeStart=function(){i.swipeStart()},i._swipeAction=function(){i.swipeAction()},i._swipeEnd=function(){i.swipeEnd()},i.percentForSuccessfulScrolling=Math.round(i.sliderWidth/100*i.percentageForSuccessfulScrolling),i.goingOutBoundsSlider=function(){i.swipeEnd(),i.sliderTrack.removeEventListener("mouseout",i.goingOutBoundsSlider)},i}return _createClass(SliderWithFight,[{key:"addOptions",value:function addOptions(){this.percentageForSuccessfulScrolling=this.options.percentageForSuccessfulScrolling?this.options.percentageForSuccessfulScrolling:35}},{key:"removeEventsSliderTrack",value:function removeEventsSliderTrack(){this.sliderTrack.removeEventListener("touchmove",this._swipeAction),this.sliderTrack.removeEventListener("touchend",this._swipeEnd),this.sliderTrack.removeEventListener("mousemove",this._swipeAction),this.sliderTrack.removeEventListener("mouseout",this.goingOutBoundsSlider),this.sliderTrack.removeEventListener("mouseup",this._swipeEnd),this.slider.classList.remove("slider-active"),this.allowSwipe=!0}},{key:"addTransitionSliderTrack",value:function addTransitionSliderTrack(e){var t=this;this.sliderTrack.style.transition="transform 0.".concat(e,"s ease"),this.positionFinal=this.currentSlide*this.sliderWidth,this.allowSwipe=!1,setTimeout(function(){t.sliderTrack.style.transform="translate3d(".concat(-t.positionFinal,"px, 0px, 0px)")},0),setTimeout(function(){t.sliderTrack.style.transition="none",t.allowSwipe=!0},e)}},{key:"returnsSliderBack",value:function returnsSliderBack(){this.addTransitionSliderTrack(500)}},{key:"checksIfSliderNeedsPromoted",value:function checksIfSliderNeedsPromoted(){this.singleSwipe>=this.percentForSuccessfulScrolling&&this.currentSlide!==this.numberSlides.length-1?(this.currentSlide++,this.addTransitionSliderTrack(500)):this.singleSwipe<=this.percentForSuccessfulScrolling&&0!==this.currentSlide?(this.currentSlide--,this.addTransitionSliderTrack(500)):this.returnsSliderBack()}},{key:"pushingSlider",value:function pushingSlider(){this.singleSwipe=this.positionSliderTrack-this.positionFinal,this.sliderTrack.style.transform="translate3d(".concat(-this.positionSliderTrack,"px, 0px, 0px)"),5<=Math.abs(this.singleSwipe)&&(this.isScrollingSlider=!0)}},{key:"swipeStart",value:function swipeStart(){if(this.allowSwipe){var e=_get(_getPrototypeOf(SliderWithFight.prototype),"getEvent",this).call(this);_get(_getPrototypeOf(SliderWithFight.prototype),"calculatesTouchCoordinates_SwipeStart",this).call(this,this.evt=e),this.sliderTrack.style.transform="translate3d(-".concat(this.positionFinal,"px, 0px, 0px)"),this.sliderTrack.addEventListener("mouseup",this._swipeEnd),this.sliderTrack.addEventListener("touchend",this._swipeEnd,{passive:!0}),this.sliderTrack.addEventListener("mousemove",this._swipeAction),this.sliderTrack.addEventListener("touchmove",this._swipeAction,{passive:!0}),this.sliderTrack.addEventListener("mouseout",this.goingOutBoundsSlider),this.slider.classList.add("slider-active")}}},{key:"swipeAction",value:function swipeAction(){var e=_get(_getPrototypeOf(SliderWithFight.prototype),"getEvent",this).call(this);_get(_getPrototypeOf(SliderWithFight.prototype),"checkSliderCanBeMoved",this).call(this,this.evt=e),this.allowSwipe&&(this.positionSliderTrack=this.positionPressedX-e.clientX+this.positionFinal,"touchmove"===event.type&&(this.positionX_FingetCurrentMoment_OnSlider=Math.abs(this.positionPressedX-e.clientX),this.positionY_FingetCurrentMoment_OnSlider=Math.abs(this.positionPressedY-e.clientY),_get(_getPrototypeOf(SliderWithFight.prototype),"checksOutOfBounds",this).call(this)),this.pushingSlider())}},{key:"swipeEnd",value:function swipeEnd(){this.removeEventsSliderTrack(),this.isScrollingSlider=!1,Math.abs(this.singleSwipe)<=this.percentForSuccessfulScrolling?this.returnsSliderBack():this.checksIfSliderNeedsPromoted()}},{key:"run",value:function run(){this.sliderTrack.addEventListener("mousedown",this._swipeStart),this.sliderTrack.addEventListener("touchstart",this._swipeStart,{passive:!0})}}]),SliderWithFight}();