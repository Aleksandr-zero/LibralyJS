function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,i,e){return i&&_defineProperties(t.prototype,i),e&&_defineProperties(t,e),t}function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&_setPrototypeOf(t,i)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,i){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,i){return t.__proto__=i,t})(t,i)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,i){return!i||"object"!=typeof i&&"function"!=typeof i?_assertThisInitialized(t):i}function _createSuper(s){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var t,i=_getPrototypeOf(s);if(r){var e=_getPrototypeOf(this).constructor;t=Reflect.construct(i,arguments,e)}else t=i.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _superPropBase(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=_getPrototypeOf(t)););return t}function _get(t,i,e){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,i,e){var s=_superPropBase(t,i);if(s){var r=Object.getOwnPropertyDescriptor(s,i);return r.get?r.get.call(e):r.value}})(t,i,e||t)}var Slider=function(){function Slider(){_classCallCheck(this,Slider)}return _createClass(Slider,[{key:"getEvent",value:function getEvent(){return-1!=event.type.search("touch")?event.touches[0]:event}},{key:"measuresMaximumSwipeOfSlider",value:function measuresMaximumSwipeOfSlider(){var i=this;this.sliderTrack.querySelectorAll(".slide").forEach(function(t){i.maximumSwipingAtSlider+=t.offsetWidth}),this.maximumSwipingAtSlider-=this.sliderWidth}},{key:"checkSliderCanBeMoved",value:function checkSliderCanBeMoved(t){if(5<=Math.abs(t.clientY-this.positionPressedY)&&"touchmove"===event.type){this.isScrollingSlider?this.isScrollingSlider&&(this.allowSwipe=!0):(this.allowSwipe=!1,this.removeEventsSliderTrack())}}},{key:"checksOutOfBounds",value:function checksOutOfBounds(){(this.positionX_FingetCurrentMoment_OnSlider>=this.positionFingerPressSliderX&&0<this.positionSliderTrack-this.positionFinal||this.positionX_FingetCurrentMoment_OnSlider>=this.sliderWidth-this.positionFingerPressSliderX&&this.positionSliderTrack-this.positionFinal<0)&&this.swipeEnd()}},{key:"calculatesTouchCoordinates_SwipeStart",value:function calculatesTouchCoordinates_SwipeStart(t){this.positionPressedX=t.clientX,this.positionPressedY=t.clientY,this.positionFingerPressSliderX=this.positionPressedX-this.slider.getBoundingClientRect().x,this.positionFingerPressSliderY=this.positionPressedY-this.slider.getBoundingClientRect().y}}]),Slider}(),SliderWithoutFight=function(t){_inherits(SliderWithoutFight,Slider);var r=_createSuper(SliderWithoutFight);function SliderWithoutFight(t,i){var e,s;return _classCallCheck(this,SliderWithoutFight),(s=r.call(this)).slider=t,s.options=i,s.sliderTrack=s.slider.querySelector(".slider-track"),s.sliderWidth=s.slider.offsetWidth,s.maximumSwipingAtSlider=0,s.positionSliderTrack=0,s.positionFinal=0,s.singleSwipe=0,s.positionPressedX,s.positionPressedY,s.positionFingerPressSliderX,s.positionFingerPressSliderY,s.positionX_FingetCurrentMoment_OnSlider,s.positionY_FingetCurrentMoment_OnSlider,s.allowSwipe=!0,s.isScrollingSlider=!1,_get((e=_assertThisInitialized(s),_getPrototypeOf(SliderWithoutFight.prototype)),"measuresMaximumSwipeOfSlider",e).call(e),s.addOptions(),s._swipeAction=function(){s.swipeAction()},s._swipeEnd=function(){s.swipeEnd()},s.goingOutBoundsSlider=function(){s.swipeEnd(),s.sliderTrack.removeEventListener("mouseout",s.goingOutBoundsSlider)},s}return _createClass(SliderWithoutFight,[{key:"addOptions",value:function addOptions(){this.scrollAfterAbruptStop=!this.options||this.options.scrollAfterAbruptStop}},{key:"removeEventsSliderTrack",value:function removeEventsSliderTrack(){this.sliderTrack.removeEventListener("mousemove",this._swipeAction),this.sliderTrack.removeEventListener("touchmove",this._swipeAction),this.sliderTrack.removeEventListener("mouseup",this._swipeEnd),this.sliderTrack.removeEventListener("touchend",this._swipeEnd),this.sliderTrack.removeEventListener("mouseout",this.goingOutBoundsSlider),this.slider.classList.remove("slider-active")}},{key:"measuresSpeedTrafficSliderTrack",value:function measuresSpeedTrafficSliderTrack(){var t=(this.singleSwipe/this.swipeSlider_Time).toFixed(2);this.autoPushingSlider(t)}},{key:"autoPushingSlider",value:function autoPushingSlider(t){if(!(t<=.6||this.positionSliderTrack>this.maximumSwipingAtSlider)){var i=t*this.positionSliderTrack;i<this.positionSliderTrack&&(i=this.positionSliderTrack),"right"===this.directionSliderTrack&&(i=Math.round(i-(i-this.positionSliderTrack/1.45))),i>this.maximumSwipingAtSlider?i=this.maximumSwipingAtSlider:i<0&&(i=0),this.setsStyle_For_autoPushingSlider(i)}}},{key:"setsStyle_For_autoPushingSlider",value:function setsStyle_For_autoPushingSlider(t){var i=this;this.sliderTrack.style.transform="translate3d(-".concat(t,"px, 0px, 0px)"),this.sliderTrack.style.transition="transform 1s ease-out",this.sliderTrack.addEventListener("transitionend",function(){i.sliderTrack.style.transition="none",i.positionFinal=i.positionSliderTrack=t})}},{key:"stopsAutoScrolling",value:function stopsAutoScrolling(){var t=Math.abs(Math.round(this.sliderTrack.getBoundingClientRect().x)-Math.round(this.slider.getBoundingClientRect().x));this.positionFinal=this.positionSliderTrack=t,this.sliderTrack.style.transform="translate3d(-".concat(this.positionFinal,"px, 0px, 0px)")}},{key:"pushingSlider",value:function pushingSlider(){this.singleSwipe=Math.abs(this.positionSliderTrack-this.positionFinal),5<=this.singleSwipe&&(this.isScrollingSlider=!0),this.positionSliderTrack<=this.maximumSwipingAtSlider&&this.allowSwipe&&0<this.positionSliderTrack&&this.allowSwipe&&(this.sliderTrack.style.transform="translate3d(-".concat(this.positionSliderTrack,"px, 0px, 0px)"))}},{key:"swipeStart",value:function swipeStart(){this.stopsAutoScrolling(),this.allowSwipe=!0,this.time_1=performance.now();var t=_get(_getPrototypeOf(SliderWithoutFight.prototype),"getEvent",this).call(this);_get(_getPrototypeOf(SliderWithoutFight.prototype),"calculatesTouchCoordinates_SwipeStart",this).call(this,this.evt=t),this.sliderTrack.style.transform="translate3d(".concat(-this.positionFinal,"px, 0px, 0px)"),this.sliderTrack.style.transition="none",this.sliderTrack.addEventListener("mousemove",this._swipeAction),this.sliderTrack.addEventListener("touchmove",this._swipeAction,{passive:!0}),this.sliderTrack.addEventListener("mouseup",this._swipeEnd),this.sliderTrack.addEventListener("touchend",this._swipeEnd,{passive:!0}),this.sliderTrack.addEventListener("mouseout",this.goingOutBoundsSlider),this.slider.classList.add("slider-active")}},{key:"swipeAction",value:function swipeAction(){var t=_get(_getPrototypeOf(SliderWithoutFight.prototype),"getEvent",this).call(this);this.directionSliderTrack=this.positionPressedX<t.clientX?"right":"left",_get(_getPrototypeOf(SliderWithoutFight.prototype),"checkSliderCanBeMoved",this).call(this,this.evt=t),this.allowSwipe&&("touchmove"===event.type&&(this.positionX_FingetCurrentMoment_OnSlider=Math.abs(this.positionPressedX-t.clientX),this.positionY_FingetCurrentMoment_OnSlider=Math.abs(this.positionPressedY-t.clientY),_get(_getPrototypeOf(SliderWithoutFight.prototype),"checksOutOfBounds",this).call(this)),this.allowSwipe&&(this.positionSliderTrack=this.positionPressedX-t.clientX+this.positionFinal,this.pushingSlider()))}},{key:"swipeEnd",value:function swipeEnd(){this.allowSwipe?(this.singleSwipe=Math.abs(this.positionSliderTrack-this.positionFinal),this.positionFinal=this.positionSliderTrack,this.positionFinal>this.maximumSwipingAtSlider?this.positionFinal=this.maximumSwipingAtSlider:this.positionFinal<0&&(this.positionFinal=0),this.allowSwipe=!0,this.isScrollingSlider=!1,this.scrollAfterAbruptStop&&(this.swipeSlider_Time=performance.now()-this.time_1,this.measuresSpeedTrafficSliderTrack()),this.removeEventsSliderTrack()):this.allowSwipe=!0}},{key:"run",value:function run(){var t=this;this.sliderTrack.addEventListener("touchstart",function(){t.swipeStart()},{passive:!0}),this.sliderTrack.addEventListener("mousedown",function(){t.swipeStart()})}}]),SliderWithoutFight}();