"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var SliderEndless=function(){function SliderEndless(e,t){_classCallCheck(this,SliderEndless),this.slider=e,this.options=t,this.sliderTrack=this.slider.querySelector(".slider-track"),this.positionSliderTrack=0,this.slides=this.sliderTrack.children,this.numberSlides=this.slides.length,this.widthSlide=this.slides[0].offsetWidth,this.intervals=[],this.timeouts=[],this.sliderBtnPushLast=this.slider.querySelector(".btn-slider-push-last"),this.sliderBtnPushNext=this.slider.querySelector(".btn-slider-push-next")}return _createClass(SliderEndless,[{key:"addOptions",value:function addOptions(){this.speed=this.options&&this.options.speed?this.options.speed:200,this.timerAdvance=this.options&&this.options.timerAdvance?[this.options.timerAdvance[0],this.options.timerAdvance[1]]:[!1],this.options&&this.timerAdvance[0]&&(this.addSetInterval_For_Slider(),this.checks_If_UserOnSite(),this.addEventMouse_TouchMove_Slider())}},{key:"addEventClick_BtnsSliderPush",value:function addEventClick_BtnsSliderPush(){var e=this;this.sliderBtnPushLast.addEventListener("click",function(){e.pressedBtnPushSlider()}),this.sliderBtnPushNext.addEventListener("click",function(){e.pressedBtnPushSlider()})}},{key:"pushingSlider",value:function pushingSlider(){var e=this,t=event.currentTarget.dataset.direction,i="next"===t?2*-this.widthSlide:0;this.sliderTrack.style.transform="translate3d(".concat(i,"px, 0px, 0px)"),this.addCssSliderTrack(),this.movesSlider_If_OnlyTwoSlides()||setTimeout(function(){"next"===t?e.movesFirstSlide_TheEnd():e.movesLastSlide_Start()},1.5*this.speed)}},{key:"movesSlider_If_OnlyTwoSlides",value:function movesSlider_If_OnlyTwoSlides(){var e=this;if(2===this.numberSlides)return setTimeout(function(){e.changeFirst_LastSlide()},1.5*this.speed),!0}},{key:"pressedBtnPushSlider",value:function pressedBtnPushSlider(){var e=this;this.clearnsSetIntervals(),this.blocking_unlockingBtnsSliders("none"),this.pushingSlider(),setTimeout(function(){e.blocking_unlockingBtnsSliders("auto")},1.5*this.speed)}},{key:"movesFirstSlide_TheEnd",value:function movesFirstSlide_TheEnd(){var e=this.slides[0];e.remove(),this.sliderTrack.append(e),this.nullifiesCssSliderTrack()}},{key:"movesLastSlide_Start",value:function movesLastSlide_Start(){var e=this.slides[this.numberSlides-1];e.remove(),this.sliderTrack.prepend(e),this.nullifiesCssSliderTrack()}},{key:"changeFirst_LastSlide",value:function changeFirst_LastSlide(){var e=this.slides[0],t=this.slides[this.slides.length-1],i=this.slides[1].cloneNode(!0);this.sliderTrack.prepend(i),this.sliderTrack.append(e),this.sliderTrack.append(i),t.remove(),this.nullifiesCssSliderTrack()}},{key:"addLastSlideStart",value:function addLastSlideStart(){var e=this.slides[this.slides.length-1].cloneNode(!0);this.sliderTrack.prepend(e),this.checkNumbersSlides()||this.slides[this.slides.length-1].remove()}},{key:"checkNumbersSlides",value:function checkNumbersSlides(){if(2===this.numberSlides)return!0}},{key:"addCssSliderTrack",value:function addCssSliderTrack(){this.sliderTrack.style.transition="transform 0.".concat(1.5*this.speed,"s")}},{key:"blocking_unlockingBtnsSliders",value:function blocking_unlockingBtnsSliders(e){this.sliderBtnPushLast.style.pointerEvents="".concat(e),this.sliderBtnPushNext.style.pointerEvents="".concat(e)}},{key:"nullifiesCssSliderTrack",value:function nullifiesCssSliderTrack(){this.sliderTrack.style.transition="none",this.sliderTrack.style.transform="translate3d(-250px, 0px, 0px)"}},{key:"addSetInterval_For_Slider",value:function addSetInterval_For_Slider(){this.addEventScroll_BlurWindow(),this.countsPositionSlider_Window()}},{key:"addEventScroll_BlurWindow",value:function addEventScroll_BlurWindow(){var e=this;this.isVisible=!1,window.addEventListener("scroll",function(){e.countsPositionSlider_Window()})}},{key:"countsPositionSlider_Window",value:function countsPositionSlider_Window(){var e={top:window.pageYOffset+this.slider.getBoundingClientRect().top,bottom:window.pageXOffset+this.slider.getBoundingClientRect().bottom},t={top:window.pageYOffset,bottom:window.pageYOffset+document.documentElement.clientHeight};this.checks_If_SliderVisible(e,t)}},{key:"checks_If_SliderVisible",value:function checks_If_SliderVisible(e,t){if(t.top-this.slider.clientHeight<=e.top&&e.top<t.bottom){if(this.isVisible)return;this.createSetInterval_For_Slider(),this.isVisible=!0}else this.clearnsSetIntervals(),this.isVisible=!1}},{key:"checks_If_UserOnSite",value:function checks_If_UserOnSite(){var e=this;this.timerAdvance[0]&&document.addEventListener("visibilitychange",function(){document.hidden?(e.clearnsSetIntervals(),e.isVisible=!1):e.countsPositionSlider_Window()})}},{key:"addEventMouse_TouchMove_Slider",value:function addEventMouse_TouchMove_Slider(){var e=this;this.slider.addEventListener("mousemove",function(){e.clearnsSetIntervals()}),this.slider.addEventListener("mouseout",function(){e.createSetInterval_For_Slider()}),this.slider.addEventListener("touchstart",function(){e.clearnsSetIntervals(),e.clearnsSetTimeouts()},{passive:!0}),this.slider.addEventListener("touchend",function(){e.timeout=setTimeout(function(){e.createSetInterval_For_Slider()},300),e.timeouts.push(e.timeout)},{passive:!0})}},{key:"createSetInterval_For_Slider",value:function createSetInterval_For_Slider(){var e=this;this.timeInterval=setInterval(function(){e.sliderTrack.style.transform="translate3d(-".concat(2*e.widthSlide,"px, 0px, 0px)"),e.addCssSliderTrack(),e.movesSlider_If_OnlyTwoSlides()||setTimeout(function(){e.movesFirstSlide_TheEnd()},1.5*e.speed)},this.timerAdvance[1]),this.intervals.push(this.timeInterval)}},{key:"clearnsSetIntervals",value:function clearnsSetIntervals(){this.intervals.forEach(function(e){window.clearInterval(e)})}},{key:"clearnsSetTimeouts",value:function clearnsSetTimeouts(){this.timeouts.forEach(function(e){window.clearInterval(e)})}},{key:"run",value:function run(){this.addOptions(),this.addLastSlideStart(),this.addEventClick_BtnsSliderPush(),this.sliderTrack.style.transform="translate3d(-250px, 0px, 0px)"}}]),SliderEndless}();