"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,e){for(var t=0;t<e.length;t++){var s=e[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass(i,e,t){return e&&_defineProperties(i.prototype,e),t&&_defineProperties(i,t),i}var SliderWithoutFight=function(){function SliderWithoutFight(i,e){var t=this;_classCallCheck(this,SliderWithoutFight),this.slider=i,this.options=e,this.sliderTrack=this.slider.querySelector(".slider-track"),this.sliderWidth=this.slider.offsetWidth,this.sliderHeight=this.slider.offsetHeight,this.maximumSwipingAtSlider=0,this.positionFinal=0,this.singleSwipe=0,this.positionPressedX,this.positionPressedY,this.positionSliderTrack=0,this.positionFingerPressSliderX,this.positionFingerPressSliderY,this.positionX_FingetCurrentMoment_OnSlider=0,this.positionY_FingetCurrentMoment_OnSlider=0,this.allowSwipe=!0,this.isScrollingSlider=!1,this.measuresMaximumSwipeOfSlider(),this.addOptions(),this.swipeAction=function(){var i=t.getEvent();5<=Math.abs(i.clientY-t.positionPressedY)&&"touchmove"===event.type&&(t.isScrolledPage=!0,t.isScrolledPage&&!t.isScrollingSlider?(t.allowSwipe=!1,t.removeEventsSliderTrack()):t.isScrolledPage&&t.isScrollingSlider&&(t.allowSwipe=!0)),t.allowSwipe&&("touchmove"===event.type&&(t.positionX_FingetCurrentMoment_OnSlider=Math.abs(t.positionPressedX-i.clientX),t.positionY_FingetCurrentMoment_OnSlider=Math.abs(t.positionPressedY-i.clientY),t.checksOutOfBounds()),t.allowSwipe&&(t.positionSliderTrack=t.positionPressedX-i.clientX+t.positionFinal,t.pushingSlider(t.positionFingerMovement=t.positionSliderTrack)))},this.goingOutBoundsSlider=function(){t.swipeEnd(),t.sliderTrack.removeEventListener("mouseout",t.goingOutBoundsSlider)}}return _createClass(SliderWithoutFight,[{key:"addOptions",value:function addOptions(){this.options&&this.setsSpeed_For_slider()}},{key:"getEvent",value:function getEvent(){return-1!=event.type.search("touch")?event.touches[0]:event}},{key:"measuresMaximumSwipeOfSlider",value:function measuresMaximumSwipeOfSlider(){var e=this;this.sliderTrack.querySelectorAll(".slide").forEach(function(i){e.maximumSwipingAtSlider+=i.offsetWidth}),this.maximumSwipingAtSlider-=this.slider.querySelector(".slider-list").offsetWidth}},{key:"checksOutOfBounds",value:function checksOutOfBounds(){(this.positionX_FingetCurrentMoment_OnSlider>=this.positionFingerPressSliderX&&0<this.positionSliderTrack-this.positionFinal||this.positionX_FingetCurrentMoment_OnSlider>=this.sliderWidth-this.positionFingerPressSliderX&&this.positionSliderTrack-this.positionFinal<0)&&this.sliderTrack.removeEventListener("touchmove",this.swipeAction)}},{key:"checkSliderCanBeMoved",value:function checkSliderCanBeMoved(){this.getEvent().clientY}},{key:"measuresSpeedTrafficSliderTrack",value:function measuresSpeedTrafficSliderTrack(){(this.singleSwipe/this.swipeSlider_Time).toFixed(2)}},{key:"autoPushingSlide",value:function autoPushingSlide(i){}},{key:"pushingSlider",value:function pushingSlider(){this.singleSwipe=Math.abs(this.positionSliderTrack-this.positionFinal),5<=this.singleSwipe&&(this.isScrollingSlider=!0),this.positionSliderTrack<=this.maximumSwipingAtSlider&&this.allowSwipe&&(this.sliderTrack.style.transform="translate3d(-".concat(this.positionSliderTrack,"px, 0px, 0px)"))}},{key:"swipeStart",value:function swipeStart(){var i=this.getEvent();this.time_1=(new Date).getTime(),this.sliderTrack.addEventListener("mousemove",this.swipeAction),this.sliderTrack.addEventListener("touchmove",this.swipeAction,{passive:!0}),this.positionPressedX=i.clientX,this.positionPressedY=i.clientY,this.positionFingerPressSliderX=i.clientX-this.slider.getBoundingClientRect().x,this.positionFingerPressSliderY=i.clientY-this.slider.getBoundingClientRect().y,this.sliderTrack.style.transform="translate3d(".concat(-this.positionFinal,"px, 0px, 0px)"),this.sliderTrack.addEventListener("mouseout",this.goingOutBoundsSlider),this.slider.classList.add("slider-active")}},{key:"swipeEnd",value:function swipeEnd(){this.positionFinal;this.singleSwipe=Math.abs(this.positionSliderTrack-this.positionFinal),this.positionFinal=this.positionSliderTrack,this.positionFinal>this.maximumSwipingAtSlider?this.positionFinal=this.maximumSwipingAtSlider:this.positionFinal<0&&(this.positionFinal=0),this.allowSwipe=!0,this.isScrollingSlider=!1,this.swipeSlider_Time=(new Date).getTime()-this.time_1,this.measuresSpeedTrafficSliderTrack(),this.removeEventsSliderTrack()}},{key:"removeEventsSliderTrack",value:function removeEventsSliderTrack(){this.sliderTrack.removeEventListener("mousemove",this.swipeAction),this.sliderTrack.removeEventListener("touchmove",this.swipeAction),this.sliderTrack.removeEventListener("mouseout",this.goingOutBoundsSlider),this.slider.classList.remove("slider-active")}},{key:"setsSpeed_For_slider",value:function setsSpeed_For_slider(){this.speed=this.options.speed?this.options.speed:200}},{key:"run",value:function run(){var i=this;this.sliderTrack.addEventListener("touchstart",function(){i.swipeStart()},{passive:!0}),this.sliderTrack.addEventListener("touchend",function(){i.swipeEnd()},{passive:!0}),this.sliderTrack.addEventListener("mousedown",function(){i.swipeStart()}),this.sliderTrack.addEventListener("mouseup",function(){i.swipeEnd()})}}]),SliderWithoutFight}();